<div dir='rtl'>

# 📁 ساختار پروژه و سازماندهی فایل‌ها در Next.js

وقتی یه پروژه Next.js می‌سازیم، مثل اینه که داریم خونه‌سازی می‌کنیم. هر پوشه (folder) و فایل (file) مثل یه اتاق یا وسیله‌ست که جای مشخصی داره. اگه همه‌چیز مرتب باشه، پیدا کردنش خیلی راحت میشه.

---

## 🔝 پوشه‌های اصلی (Top-level folders)

این پوشه‌ها ستون فقرات پروژه‌ان:

* `app` → جایی که مسیرها (routes) و صفحاتت رو می‌سازی (Router جدید = App Router).
* `pages` → روش قدیمی برای ساخت صفحات (Pages Router).
* `public` → جایی برای عکس‌ها و فایل‌های ثابت (مثلاً لوگو یا ویدیو).
* `src` → یه پوشه اختیاری برای تمیزتر کردن پروژه (یعنی می‌تونی کل کدت رو ببری توش).

📌 مثال:
تصور کن `public` مثل یخچال خونته. هر چیزی که بذاری داخلش (مثلاً عکس)، از بیرون هم قابل دسترسی میشه.

---

## 📑 فایل‌های اصلی (Top-level files)

چندتا فایل مهم هستن که مثل **کنترل از راه دور خونه‌ات** کار می‌کنن:

* `next.config.js` → تنظیمات کلی پروژه.
* `package.json` → لیست وسیله‌ها (dependencies) و دستورات (scripts).
* `.env` → رمزها و کلیدهای مخفی پروژه (مثل رمز وای‌فای).
* `middleware.ts` → نگهبان در ورودی (هر درخواست اول از اینجا رد میشه).
* `.gitignore` → به گیت میگه چه فایل‌هایی رو نبینه.

📌 مثال: `.env.local` = رمز خونت که فقط خودت می‌دونی، به همسایه‌ها نمیگی 😄.

---

## 📌 فایل‌های مسیر (Routing Files)

این‌ها به Next.js میگن **کدوم فایل تبدیل به کدوم صفحه بشه**:

* `page.tsx` → صفحه‌ی اصلی یه مسیر.
* `layout.tsx` → اسکلت ثابت مثل هدر و فوتر.
* `loading.tsx` → اسکلت لودینگ وقتی دیتا داره میاد.
* `error.tsx` → وقتی خطا پیش اومد.
* `not-found.tsx` → صفحه ۴۰۴.
* `route.ts` → برای API (یعنی بک‌اند کوچیک داخل پروژه).

📌 مثال:
`app/blog/page.tsx` → وقتی میری به `/blog` این صفحه لود میشه.

---

## 🪜 مسیرهای تو در تو (Nested routes)

* هر پوشه = یه تیکه از آدرس URL.
* اگه توی `app/blog/authors/page.tsx` باشه → آدرس میشه `/blog/authors`.

📌 مثال:
مثل کشوهای خونه‌ست. توی کشو اصلی، کشوهای کوچیک‌تری داری.

---

## 🌀 مسیرهای داینامیک (Dynamic Routes)

* `[slug]` → یه پارامتر. مثال: `/blog/my-first-post`.
* `[...slug]` → هرچی بیاد رو می‌گیره (catch-all).
* `[[...slug]]` → اختیاری (optional catch-all).

📌 مثال:
مثل یه جا لباسی که هرچی آویز بزنی (slug)، جا میده.

---

## 👥 گروه‌بندی مسیرها (Route Groups)

گاهی می‌خوای پوشه‌ها فقط برای نظم باشن، ولی توی URL دیده نشن. اون‌وقت از پرانتز استفاده می‌کنی:

* `app/(shop)/cart/page.tsx` → آدرسش میشه `/cart` نه `/shop/cart`.

📌 مثال:
مثل کشوی "وسایل مدرسه" که توش دفتر و مداد داری، ولی روی کشو فقط نوشته "وسایل".

---

## 🔒 پوشه‌های خصوصی (Private folders)

اگه قبل اسم پوشه یه `_` بزاری، Next.js اونو به‌عنوان مسیر حساب نمی‌کنه.

📌 مثال:
`app/blog/_components/Post.tsx` → فایل کمکیه، ولی URL نداره.

---

## 🎭 مسیرهای موازی و اینترسپت (Parallel & Intercepted Routes)

این یکی‌ها بیشتر برای **طراحی‌های پیچیده** مثل داشبورد و مدال هستن:

* `@slot` → یه جای مخصوص (مثل سایدبار).
* `(.)folder` → باز کردن یه مسیر کنار همسطح.
* `(..)folder` → نمایش مسیر والد.

📌 مثال:
مثل وقتی داری لیست دوستاتو می‌بینی و رو یکی کلیک می‌کنی، پروفایلش به صورت مدال باز میشه، بدون اینکه آدرس تغییر کنه.

---

## 🖼️ متادیتا و سئو

* `favicon.ico` → آیکن سایت.
* `opengraph-image.png` → عکسی که توی شبکه‌های اجتماعی نشون داده میشه.
* `sitemap.xml` → نقشه سایت برای گوگل.
* `robots.txt` → به گوگل میگه کجاها بره یا نره.

📌 مثال:
مثل کارت ویزیت سایتت برای بقیه.

---

## 📂 سازماندهی پروژه

حالا چند روش برای مرتب‌کردن پروژه:

1. **کد خارج از `app`** → `app` فقط برای مسیرها باشه.
2. **کد داخل `app`** → همه‌چیز (کامپوننت، هوک‌ها) داخل `app`.
3. **تقسیم‌بندی بر اساس ویژگی (feature-based)** → هر بخش پروژه (مثلاً blog یا shop) فایل‌های خودش رو داشته باشه.

</div>



## 📂 ساختار یک پروژه حرفه ای رو هم واستون میزارم یک نگاهی بهش بکنید


```
my-blog/
├── app/                     # روت اصلی پروژه (App Router)
│   ├── (marketing)/          # گروه صفحات مارکتینگ (landing, about, contact)
│   │   ├── layout.tsx        # لایوت مشترک این گروه
│   │   ├── page.tsx          # صفحه اصلی (landing page)
│   │   ├── about/
│   │   │   └── page.tsx
│   │   └── contact/
│   │       └── page.tsx
│   │
│   ├── (blog)/              # گروه صفحات وبلاگ
│   │   ├── layout.tsx        # لایوت بخش بلاگ (مثلاً sidebar, navbar)
│   │   ├── page.tsx          # لیست همه پست‌ها (/blog)
│   │   ├── [slug]/           # مسیر داینامیک برای نمایش هر پست
│   │   │   ├── page.tsx      # نمایش یک پست
│   │   │   ├── loading.tsx   # لودینگ برای پست
│   │   │   ├── error.tsx     # هندل ارور پست
│   │   │   └── not-found.tsx # صفحه ۴۰۴ مخصوص پست
│   │   └── categories/       # دسته‌بندی مقالات
│   │       └── [category]/page.tsx
│   │
│   ├── (dashboard)/         # بخش پنل ادمین (اختیاری)
│   │   ├── layout.tsx
│   │   ├── page.tsx
│   │   └── posts/
│   │       └── new/page.tsx
│   │
│   ├── api/                 # API های داخلی (مثل فرم تماس یا ثبت‌نام)
│   │   └── contact/route.ts
│   │
│   ├── layout.tsx           # لایوت اصلی کل سایت
│   ├── globals.css          # استایل‌های عمومی
│   └── not-found.tsx        # ۴۰۴ عمومی کل سایت
│
├── components/              # کامپوننت‌های قابل استفاده مجدد
│   ├── ui/                   # دکمه، مودال، اینپوت و...
│   ├── blog/                 # کامپوننت‌های مخصوص بلاگ (PostCard, PostList)
│   └── layout/               # هدر، فوتر، ناوبار
│
├── lib/                     # توابع کمکی (helper functions)
│   ├── api.ts                # توابع fetch داده
│   └── utils.ts              # توابع عمومی
│
├── services/                 # لایه ارتباط با API بیرونی یا دیتابیس
│   ├── posts.ts               # فانکشن‌های مربوط به پست‌ها
│   └── users.ts
│
├── types/                    # تایپ‌ها و اینترفیس‌ها (TypeScript)
│   └── post.ts
│
├── public/                   # فایل‌های استاتیک (تصاویر، آیکن‌ها، robots.txt)
│   ├── images/
│   ├── favicon.ico
│   ├── robots.txt
│   └── sitemap.xml
│
├── middleware.ts             # نگهبان وسط راه (مثلاً auth redirect)
├── next.config.js            # تنظیمات Next.js
├── package.json
├── tsconfig.json             # تنظیمات TypeScript
└── .env.local                # متغیرهای محیطی (کلید API و ...)
```

---
<div dir='rtl'>

# 📝 توضیح هر بخش

### ✅ `app/`

قلب پروژه، هر پوشه اینجا یک **مسیر (route)** تولید می‌کنه.
ما از **Route Groups** (`(blog)`, `(marketing)`) استفاده کردیم که مرتب باشه ولی توی URL دیده نشه.

---

### ✅ `components/`

جایی برای کامپوننت‌های قابل استفاده‌ی مجدد.

* `ui/` → دکمه، اینپوت، مودال (دیزاین سیستم کوچک).
* `blog/` → پست‌کارت، لیست پست‌ها.
* `layout/` → هدر و فوتر.

---

### ✅ `lib/`

توابع کمکی که به پروژه نظم میده.

* `api.ts` → فانکشن fetch برای گرفتن دیتا از سرور.
* `utils.ts` → توابع عمومی مثل formatDate.

---

### ✅ `services/`

جایی برای فانکشن‌هایی که مستقیماً با API یا دیتابیس ارتباط دارن.
مثلاً:

```ts
// services/posts.ts
import { Post } from "@/types/post";

export async function getPosts(): Promise<Post[]> {
  const res = await fetch("https://dummyjson.com/posts", { cache: "force-cache" });
  const data = await res.json();
  return data.posts;
}
```

---

### ✅ `types/`

تمام تایپ‌ها و اینترفیس‌ها اینجا باشن.
مثلاً:

```ts
// types/post.ts
export interface Post {
  id: number;
  title: string;
  body: string;
  tags: string[];
  reactions: {
    likes: number;
    dislikes: number;
  };
  views: number;
  userId: number;
}
```

---

### ✅ `public/`

* `favicon.ico` → آیکن سایت.
* `robots.txt` و `sitemap.xml` → برای سئو.
* عکس‌ها و ویدیوهای استاتیک.

---

### ✅ فایل‌های ریشه (Root)

* `middleware.ts` → مثلاً چک کن کاربر لاگین هست یا نه.
* `.env.local` → کلیدهای API و رمزها.
* `next.config.js` → تنظیمات پیشرفته.

---

# 🌟 مزایای این ساختار

1. **اسکیل‌پذیری** → برای پروژه‌های بزرگ هم جواب میده.
2. **سئو آماده** → متادیتا، robots.txt، sitemap تو جای درست.
3. **تیم‌کاری راحت** → هر بخش (blog, dashboard, marketing) پوشه خودش رو داره.
4. **کد تمیز** → تقسیم‌بندی منطقی بین ui، services، types.
---
ببین، این ساختار پوشه‌بندی و نظم دادن به پروژه فقط برای خوشگلی نیست 😅
وقتی پروژه بزرگ بشه یا چند نفر همزمان روش کار کنن، اگه همه‌چی سرجاش نباشه آخرش کسی نمی‌فهمه کد کجاست.
با یه ساختار درست:

فیچر جدید اضافه کردن راحت‌تر میشه

کسی نمیاد وسط کدهای تو خرابکاری کنه

نگهداری پروژه هم خیلی سبک‌تر میشه
خلاصه مثل این می‌مونه که خونه‌ت رو از اول مرتب بچینی، بعدش هرچی بخوای بیاری توش دیگه سردرگم نمی‌شی. 🚀

</div>